<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>موسوعة تفاعلات الحديد — شامل</title>

  <!-- Bootstrap + FontAwesome + Google Font (Cairo) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent:#0d6efd;
      --card-bg: rgba(255,255,255,0.04);
    }
    body{
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(120deg,#071029 0%, #0b3954 100%);
      color:#e9eef5;
      padding-top:80px;
    }
    .navbar { backdrop-filter: blur(6px); background: rgba(0,0,0,0.45) !important; }
    .container { max-width:1200px; }
    h1,h2{ text-shadow: 0 6px 18px rgba(0,0,0,0.45); }
    .card-material { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.05); transition: transform .18s, box-shadow .18s; }
    .card-material:hover { transform: translateY(-6px); box-shadow: 0 10px 30px rgba(2,6,23,0.6); }
    .badge-strong { background: #d33; }
    .badge-weak { background: #f39c12; color:#000; }
    .modal-body img { max-width:100%; border-radius:8px; margin-bottom:10px; }
    .search-box { max-width:620px; margin: 10px auto 20px; }
    .rtl-table th, .rtl-table td { text-align:center; vertical-align:middle; }
    .chip { display:inline-block; padding:6px 10px; border-radius:20px; background:rgba(255,255,255,0.05); margin:3px; font-size:0.9rem;}
    .dark-mode { background: linear-gradient(120deg,#000 0%, #101010 100%); color:#ddd; }
    .topbar-actions button { margin-left:8px; }
    footer { margin-top:40px; color:#b8c7d6; text-align:center; padding:20px 0; opacity:0.9; }

    /* responsive */
    @media (max-width:720px){
      .card-material { font-size:14px; }
    }
  </style>
</head>
<body>

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
      <a class="navbar-brand text-white" href="#"><i class="fa-solid fa-atom"></i> موسوعة تفاعلات الحديد</a>
      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navmenu"><span class="navbar-toggler-icon"></span></button>
      <div class="collapse navbar-collapse" id="navmenu">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link text-white" href="#home">الرئيسية</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#explore">التفاعلات</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#sim">المحاكاة</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#resources">المراجع</a></li>
          <li class="nav-item ms-2 topbar-actions">
            <button class="btn btn-sm btn-light" id="toggleModeBtn" onclick="toggleMode()"><i class="fa-solid fa-moon"></i> تبديل الوضع</button>
            <button class="btn btn-sm btn-outline-light" id="exportBtn"><i class="fa-solid fa-file-csv"></i> تحميل CSV</button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HEADER -->
  <header id="home" class="py-5 text-center">
    <div class="container">
      <h1 class="display-5">موسوعة شاملة لتفاعلات الحديد</h1>
      <p class="lead">تفاصيل معمقة لكل مادة تتفاعل مع الحديد — صور، فيديو، معادلات، خواص تأكسدية/اختزالية، وقواعد السلامة.</p>

      <div class="search-box">
        <input id="globalSearch" class="form-control form-control-lg" placeholder="ابحث عن مادة، نوع، أو ناتج (مثال: كلور، حمض الكبريتيك، FeCl3)..." />
      </div>
      <div class="d-flex justify-content-center gap-2 flex-wrap">
        <div class="chip">قابل للبحث</div>
        <div class="chip">مودال تفصيلي لكل مادة</div>
        <div class="chip">صور + فيديوهات</div>
        <div class="chip">تحميل CSV</div>
      </div>
    </div>
  </header>

  <!-- EXPLORE / GRID OF MATERIALS -->
  <section id="explore" class="py-4">
    <div class="container">
      <h2 class="text-center mb-4">قائمة المواد والعناصر المتفاعلة مع الحديد</h2>
      <div id="materialsGrid" class="row g-3">
        <!-- Cards generated by JS -->
      </div>
    </div>
  </section>

  <!-- SIMULATION -->
  <section id="sim" class="py-4 bg-light text-dark">
    <div class="container text-center">
      <h2>محاكاة تفاعلية مبسطة</h2>
      <p>تجربة بصرية توضح تفاعل الحديد مع أكسجين/بخار/حمض (توضيحي فقط).</p>
      <div class="my-3">
        <button class="btn btn-danger me-2" onclick="simulate('oxygen')">تفاعل مع O₂</button>
        <button class="btn btn-warning me-2" onclick="simulate('acid')">تفاعل مع حمض</button>
        <button class="btn btn-secondary" onclick="simulate('co')">اختزال بـ CO</button>
      </div>
      <div id="simArea" style="height:220px; border-radius:10px; background:linear-gradient(90deg,#0b3d91 0%, #0a8ac6 100%); color:#fff; display:flex; align-items:center; justify-content:center; box-shadow:0 10px 30px rgba(2,6,23,0.6)">
        <div id="simText" style="font-size:1.3rem">اضغط زر لبدء المحاكاة</div>
      </div>
    </div>
  </section>

  <!-- RESOURCES -->
  <section id="resources" class="py-4">
    <div class="container">
      <h2 class="text-center mb-3">مراجع وصور وفيديوهات</h2>
      <p>الصور والفيديوهات المستخدمة مأخوذة من مصادر عامة مثل ويكيبيديا ويوتيوب — الروابط مرفقة داخل النوافذ التفصيلية لكل مادة.</p>
    </div>
  </section>

  <footer>
    <div class="container">
      <small>تم تجميع البيانات للعرض التعليمي فقط — راجع مصادر موثوقة للتطبيقات العملية أو المختبرية. © موسوعة تفاعلات الحديد</small>
    </div>
  </footer>

  <!-- DETAIL MODAL (مشترك) -->
  <div class="modal fade" id="detailModal" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-centered">
      <div class="modal-content bg-dark text-white">
        <div class="modal-header border-0">
          <h5 id="modalTitle" class="modal-title"></h5>
          <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-md-5">
              <img id="modalImage" src="" alt="image" class="img-fluid rounded" />
              <div class="mt-2">
                <span id="modalType" class="badge bg-info me-2"></span>
                <span id="modalOxRed" class="badge bg-warning text-dark me-2"></span>
                <span id="modalStrength" class="badge bg-danger me-2"></span>
              </div>
              <hr class="bg-secondary mt-3" />
              <div id="modalProducts"></div>
            </div>
            <div class="col-md-7">
              <h6>الوصف التفصيلي</h6>
              <p id="modalDesc" style="white-space:pre-line"></p>
              <h6>معادلات نموذجية</h6>
              <pre id="modalEquations" style="background:rgba(255,255,255,0.03); padding:12px; border-radius:8px;"></pre>
              <h6>ملاحظات السلامة / الاستخدام</h6>
              <p id="modalSafety" style="white-space:pre-line"></p>

              <div id="modalVideoWrap" class="mt-3">
                <h6>فيديو توضيحي</h6>
                <div class="ratio ratio-16x9">
                  <iframe id="modalVideo" src="" title="Video" allowfullscreen></iframe>
                </div>
              </div>

            </div>
          </div>
        </div>
        <div class="modal-footer border-0">
          <button class="btn btn-outline-light" data-bs-dismiss="modal">إغلاق</button>
        </div>
      </div>
    </div>
  </div>

  <!-- SCRIPTS: data + rendering + interactions -->
  <script>
/* -------------------------
   بيانات المواد (موسّعة)
   كل عنصر: id, name(ar), type, oxRed, strength, products, equations, desc, image, video, safety
   (قمت بجمع أمثلة واقعية — بعض المعادلات تقريبية ومبسطة لأغراض الشرح)
   ------------------------- */

const materials = [
  {
    id: "o2",
    name: "الأكسجين (O₂)",
    type: "غاز مؤكسد",
    oxRed: "مؤكسدة",
    strength: "قوية",
    products: "FeO, Fe₃O₄, Fe₂O₃ (يعتمد على درجة الحرارة وتوفر الأكسجين)",
    equations: "2Fe + O₂ → 2FeO (في ظروف نقص O₂)\n3Fe + 2O₂ → Fe₃O₄\n4Fe + 3O₂ → 2Fe₂O₃",
    desc: "الأكسجين هو المؤكسد الرئيسي للحديد في الهواء. في درجات حرارة مرتفعة يتأكسد الحديد مكونًا أكاسيد مختلفة: أكسيد الحديدي FeO (حالة +2) في ظروف نقص الأكسجين، مغناطيسيت Fe₃O₄ مزيج +2/+3، وهيماتيت Fe₂O₃ (+3) في توفر أكسجين كبير.",
    image: "https://upload.wikimedia.org/wikipedia/commons/8/86/Liquid_oxygen_in_a_beaker.jpg",
    video: "https://www.youtube.com/embed/nN6QUeEV0mA",
    safety: "تفاعل الأكسدة قد يولد حرارة — احذر من الحريق في وجود مواد قابلة للاشتعال. استخدم تهوية جيدة."
  },

  {
    id: "steam",
    name: "بخار الماء الساخن (H₂O steam)",
    type: "مادة مؤكسدة (بخار)",
    oxRed: "مؤكسدة (محدودًا)",
    strength: "متوسطة",
    products: "Fe₃O₄ + H₂ (في تفاعل اختزال-أكسدة عند درجات عالية)",
    equations: "3Fe + 4H₂O (g) → Fe₃O₄ + 4H₂",
    desc: "بخار الماء عند درجات حرارة مرتفعة يتفاعل مع الحديد لتكوين مغناطيسيت وإطلاق هيدروجين. هذا مهم في العمليات الصناعية ومحطات الفحم.",
    image: "https://upload.wikimedia.org/wikipedia/commons/2/21/Magnetite.jpg",
    video: "https://www.youtube.com/embed/zOslzsXQrXQ",
    safety: "يجب التحكم في درجات الحرارة؛ تفاعل ينتج غازات قابلة للاشتعال (H₂)."
  },

  {
    id: "cl2",
    name: "الكلور (Cl₂)",
    type: "هالوجين (غاز مؤكسد)",
    oxRed: "مؤكسدة",
    strength: "قوية جدًا",
    products: "FeCl₃ أو خليط FeCl₂/FeCl₃ حسب الشروط",
    equations: "2Fe + 3Cl₂ → 2FeCl₃",
    desc: "الكلور غاز مؤكسد قوي جدًا؛ يتفاعل مع الحديد منتجًا كلوريدات الحديد. التفاعل يمكن أن يكون عنيفًا عند وجود بخار الماء أو حرارة.",
    image: "https://upload.wikimedia.org/wikipedia/commons/3/3f/Chlorine_liquid.jpg",
    video: "https://www.youtube.com/embed/GE2KxxgUuPo",
    safety: "الكلور سام ومهيج؛ يجب التعامل في مختبر مجهز وتهوية جيدة ووسائل حماية."
  },

  {
    id: "f2",
    name: "الفلور (F₂)",
    type: "هالوجين (غاز مؤكسد)",
    oxRed: "مؤكسدة",
    strength: "قوية جدًا (الأقوى)",
    products: "فلوريدات الحديد (مثلاً FeF₃) أو تأكسد شديد: تفاعلات عنيفة",
    equations: "2Fe + 3F₂ → 2FeF₃",
    desc: "الفلور هو أقوى المؤكسدات بين الهالوجينات وقد يتفاعل مع المعادن بعنف. يتطلب معدات خاصة ومواد مقاومة للتآكل.",
    image: "https://upload.wikimedia.org/wikipedia/commons/2/2e/Fluorine_Bottle.jpg",
    video: "https://www.youtube.com/embed/CmT1V4Gg4ns",
    safety: "خطر شديد؛ الغاز يُسبب حروقًا وكيميائياً مؤذٍ للغاية. لا يُستخدم إلا في ظروف صناعية متحكم بها."
  },

  {
    id: "br2",
    name: "البروم (Br₂)",
    type: "هالوجين",
    oxRed: "مؤكسدة (متوسطة)",
    strength: "متوسطة",
    products: "بروميدات الحديد (FeBr₂/FeBr₃)",
    equations: "2Fe + 3Br₂ → 2FeBr₃",
    desc: "البروم سائل/بخار سام يتفاعل مع الحديد لتشكيل بروميدات. عادة أبطأ من الكلور أو الفلور.",
    image: "https://upload.wikimedia.org/wikipedia/commons/6/60/Bromine_liquid_2.jpg",
    video: "https://www.youtube.com/embed/_u8A6q0iX1s",
    safety: "هواء وتهوية وحماية؛ مادة تالفة ومهيجة للجلد والرئتين."
  },

  {
    id: "i2",
    name: "اليود (I₂)",
    type: "هالوجين",
    oxRed: "مؤكسدة ضعيفة نسبياً",
    strength: "ضعيفة إلى متوسطة",
    products: "يؤدي إلى تشكيل I⁻ وأملاح يوديد مع معادن معينة",
    equations: "Fe + I₂ → FeI₂ (تقريبية)",
    desc: "اليود أقل فاعلية كمؤكسد للحديد مقارنة بالهالوجينات الأخرى، لكنه يمكن أن يتفاعل في ظروف مناسبة.",
    image: "https://upload.wikimedia.org/wikipedia/commons/1/14/Iodine-vapor.jpg",
    video: "https://www.youtube.com/embed/8Bq3ql4S8Hc",
    safety: "مهيج؛ احذر التلامس المباشر والتبخر."
  },

  {
    id: "hcl",
    name: "حمض الهيدروكلوريك (HCl) المخفف",
    type: "حمض منفرد",
    oxRed: "مختزلة (يوفر H⁺) بالنسبة لبعض الأكسدة السطحية",
    strength: "متوسطة/قوية حسب التركيز",
    products: "FeCl₂ (محلول) + H₂ (غاز)",
    equations: "Fe + 2HCl → FeCl₂ + H₂↑",
    desc: "حمض قوي يذيب الحديد مكونًا أملاح Fe(II) وينطلق هيدروجين. في وجود مؤكسدات قد يتحول Fe²⁺ إلى Fe³⁺.",
    image: "https://upload.wikimedia.org/wikipedia/commons/4/4b/Hydrochloric_acid.jpg",
    video: "https://www.youtube.com/embed/MfJ5IuYQrz8",
    safety: "حمض قوي؛ يسبب حروقًا، يجب استعمال حماية للجلد والعينين وتهوية."
  },

  {
    id: "h2so4",
    name: "حمض الكبريتيك H₂SO₄ (مركز / مخفف)",
    type: "حمض قوي / مؤكسد عند التركيز",
    oxRed: "يمكن أن يكون مؤكسدًا عند التركيز والحرارة",
    strength: "قوي",
    products: "FeSO₄ (Fe²⁺) أو خليط FeSO₄ + Fe₂(SO₄)₃ + SO₂ (في الحالات المؤكسدة الحارة)",
    equations: "Fe + H₂SO₄ (dilute) → FeSO₄ + H₂\n4Fe + 3H₂SO₄(conc., heat) → FeSO₄ + Fe₂(SO₄)₃ + SO₂ + H₂O (تبسيط)",
    desc: "حمض الكبريتيك المخفف يذيب الحديد ويطلق الهيدروجين. المركز الحار يعمل كمؤكسد في بعض الحالات، ويولد غاز SO₂.",
    image: "https://upload.wikimedia.org/wikipedia/commons/7/75/Sulfuric-acid-3D-vdW.png",
    video: "https://www.youtube.com/embed/OVYm6uU7WqI",
    safety: "حمض شديد التآكل، ينتج حرارة عند الإضافة إلى الماء. حماية كاملة مطلوبة."
  },

  {
    id: "hno3",
    name: "حمض النيتريك HNO₃",
    type: "حمض ومؤكسد قوي",
    oxRed: "مؤكسد",
    strength: "قوي جدًا (مؤكسد)",
    products: "قد ينتج نترات الحديد Fe(NO₃)₃ و/أو طبقة سلبية من أكاسيد/نترات تمنع التفاعل (passivation)",
    equations: "Fe + 4HNO₃(conc) → Fe(NO₃)₃ + NO + 2H₂O (أحد المسارات الممكنة)",
    desc: "يقوم HNO₃ المركز بتشكيل طبقة سلبية على الحديد مما يمنع الهجوم المستمر — لذلك الحديد قد يبدو 'خامل' أمامه أحيانًا.",
    image: "https://upload.wikimedia.org/wikipedia/commons/2/2c/Nitric-acid-3D-vdW.png",
    video: "https://www.youtube.com/embed/7kH3A6qZq0s",
    safety: "قارِ وعادمات سامة (NOx)، خطر شديد، تهوية وحماية مطلوبة."
  },

  {
    id: "h2o2",
    name: "بيروكسيد الهيدروجين H₂O₂",
    type: "مؤكسد (محلول)",
    oxRed: "مؤكسد",
    strength: "قوي (يعتمد على التركيز)",
    products: "أكاسيد Fe³⁺ مثل Fe₂O₃ أو أكاسيد مختلطة",
    equations: "2Fe²⁺ + H₂O₂ + 2H⁺ → 2Fe³⁺ + 2H₂O (التأثير في المحاليل)",
    desc: "H₂O₂ مؤكسد قوي في التركيزات العالية؛ يحول Fe²⁺ إلى Fe³⁺ وقد يتسبب في تآكل أسرع.",
    image: "https://upload.wikimedia.org/wikipedia/commons/7/7d/Hydrogen-peroxide-3D-vdW.png",
    video: "https://www.youtube.com/embed/6H2uH1Xl7g4",
    safety: "تركيزات عالية مؤكسدة وقابلة للانفجار/التفاعل؛ تعامل بحذر."
  },

  {
    id: "cu2plus",
    name: "محلول كبريتات النحاس Cu²⁺ (CuSO₄)",
    type: "أيون فلزي في محلول",
    oxRed: "مؤكسد (نسبياً) في تفاعلات الإزاحة",
    strength: "ضعيف إلى متوسط",
    products: "FeSO₄ (محلول) + ترسيب النحاس Cu(s)",
    equations: "Fe (s) + Cu²⁺ (aq) → Fe²⁺ (aq) + Cu (s)",
    desc: "تفاعل إزاحة: الحديد يحل محل النحاس في المحلول لأن الحديد أقل نباضة كهربائية من النحاس، لذا يترسب النحاس المعدني.",
    image: "https://upload.wikimedia.org/wikipedia/commons/6/66/Copper_II_sulfate.jpg",
    video: "https://www.youtube.com/embed/Y8JvY6l1UeI",
    safety: "محاليل النحاس سامة للحياة المائية؛ تعامل مع الحماية."
  },

  {
    id: "agno3",
    name: "نترات الفضة AgNO₃",
    type: "ملح أيوني / مؤكسد ضعيف",
    oxRed: "مؤكسد (في تفاعلات الإزاحة)",
    strength: "متوسطة",
    products: "Fe(NO₃)₂ + ترسيب Ag (فضي)",
    equations: "Fe + 2Ag⁺ → Fe²⁺ + 2Ag (s)",
    desc: "تفاعل إزاحة حيث يترسب الفضة وتتحلل أملاح الحديد في المحلول.",
    image: "https://upload.wikimedia.org/wikipedia/commons/3/37/Silver_nitrate_crystals.jpg",
    video: "https://www.youtube.com/embed/7f1Y0qjR3lE",
    safety: "AgNO₃ مادة مؤكسدة خفيفة ومضيئة؛ تحذير من التصبغات على الجلد."
  },

  {
    id: "zn2plus",
    name: "محلول كبريتات الزنك ZnSO₄",
    type: "أيون فلزي",
    oxRed: "قد يعمل كمختزل بالنسبة لبعض الأيونات",
    strength: "ضعيف",
    products: "تفاعل تبادل / لا تفاعل ملحوظ مع الحديد الصلب (مختلف عن غلاف الزنك على الحديد المجلفن)",
    equations: "في حالة وجود Zn métal والحديد، Zn عادة يحمي Fe (التضحية) لكنه لا يسبب تفاعل مباشر في المحلول مع Fe",
    desc: "الزنك يستخدم في الطلاء (galvanization) لحماية الحديد: Zn يتأكسد بدلاً من Fe (تأثير تضحية)، لذلك Zinc يحمي السطح.",
    image: "https://upload.wikimedia.org/wikipedia/commons/8/81/Zinc_powder.jpg",
    video: "https://www.youtube.com/embed/h2w6c0qzvPA",
    safety: "مألوف وصناعي؛ تعامل عادي."
  },

  {
    id: "co",
    name: "أول أكسيد الكربون CO",
    type: "غاز مختزل",
    oxRed: "مختزل",
    strength: "قوي في ظروف التسخين (كعامل اختزال)",
    products: "اختزال أكاسيد الحديد إلى حديد فلزي في الأفران (Fe)",
    equations: "Fe₂O₃ + 3CO → 2Fe + 3CO₂",
    desc: "CO يستخدم في الصهر والحدادة كعامل اختزال لإزالة الأكسجين من أكاسيد الحديد لإنتاج الحديد المعدني.",
    image: "https://upload.wikimedia.org/wikipedia/commons/9/95/Carbon_monoxide_vector.svg",
    video: "https://www.youtube.com/embed/8vQXq5j0_6c",
    safety: "CO غاز قاتل عديم الرائحة في تركيزات خطيرة؛ خطر احتراق واختناق."
  },

  {
    id: "h2",
    name: "الهيدروجين H₂",
    type: "غاز مختزل",
    oxRed: "مختزل",
    strength: "قوي (في درجات الحرارة العالية)",
    products: "اختزال أكاسيد الحديد إلى حديد فلزي + ماء",
    equations: "Fe₂O₃ + 3H₂ → 2Fe + 3H₂O",
    desc: "الهيدروجين يستخدم في الاختزال لصناعة الحديد في بعض العمليات المختبرية والصناعية.",
    image: "https://upload.wikimedia.org/wikipedia/commons/8/86/Hydrogen_gas_cylinder.jpg",
    video: "https://www.youtube.com/embed/4a2g0_kGQ1E",
    safety: "غاز قابل للاشتعال للغاية؛ خطر انفجار."
  },

  {
    id: "sulfur",
    name: "الكبريت S",
    type: "عنصر غير معدن",
    oxRed: "يمكن أن يعمل كمختزل أو يشكل كبريتيدات",
    strength: "متوسط",
    products: "كبريتيد الحديد FeS",
    equations: "Fe + S → FeS",
    desc: "تفاعل مباشر بين الحديد والكبريت عند التسخين لتكوين كبريتيدات الحديد، يستخدم ذلك في بعض التحضيرات.",
    image: "https://upload.wikimedia.org/wikipedia/commons/4/4d/Sulfur_powder.jpg",
    video: "https://www.youtube.com/embed/-xqQYvWmV8I",
    safety: "الغبار الكبريتي قابل للاشتعال؛ احذر الأبخرة."
  },

  {
    id: "phosphorus",
    name: "الفوسفور (P₄)",
    type: "لا فلز/متفاعل",
    oxRed: "قابل للتفاعل (يوفر أكسدة محلية)",
    strength: "متوسط",
    products: "مولبيات ومواد مختلطة حسب الظروف",
    equations: "تعقيدات — تفاعلات متعددة تعتمد على الظروف",
    desc: "الفوسفور عنصر تفاعلي ويمكن أن يحفز تفاعلات خاصة، لكنه نادرًا ما يتفاعل مباشرة مع قطع الحديد النقية في الظروف العادية.",
    image: "https://upload.wikimedia.org/wikipedia/commons/9/9f/White_phosphorus.jpg",
    video: "https://www.youtube.com/embed/5i6z9F7k8W0",
    safety: "الفوسفور الأبيض شديد الاشتعال وسام — مراعاة شديدة."
  },

  {
    id: "n2",
    name: "النيتروجين N₂",
    type: "غاز خامل نسبياً",
    oxRed: "خامل",
    strength: "ضعيف/لا يتفاعل في الظروف العادية",
    products: "لا تفاعل ملموس مع الحديد في الظروف العادية",
    equations: "—",
    desc: "النيتروجين غاز خامل عند الظروف الاعتيادية، لا يتفاعل عادة مع الحديد إلا في ظروف خاصة جدا (أكسدة عالية الطاقة).",
    image: "https://upload.wikimedia.org/wikipedia/commons/5/56/Nitrogen_gas_vector.svg",
    video: "https://www.youtube.com/embed/2c7x6rZf0kU",
    safety: "غاز خامل — خطر اختناق في فراغات مغلقة."
  },

  {
    id: "naoh",
    name: "هيدروكسيد الصوديوم NaOH (قاعدة)",
    type: "قاعدة قوية",
    oxRed: "قاعدة (ليست مؤكسدة بنفسها)",
    strength: "قوية (قلوية)",
    products: "في ماء قد يؤدي إلى تآكل وتكوين هيدروكسيدات - التآكل يعتمد على الظروف",
    equations: "Fe + 2NaOH + 2H₂O → Na₂[Fe(OH)₄] (أمثلة معقدة في المحاليل)",
    desc: "القلويات القوية قد تتسبب في تآكل الحديد في بعض الظروف، وتتفاعل مع الأكسدة والهيدروكسيدات.",
    image: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Sodium_hydroxide_pellets.jpg",
    video: "https://www.youtube.com/embed/6iSe2_jlXcQ",
    safety: "مادة كاوية تسبب حروق خطيرة؛ حماية مطلوبة."
  },

  {
    id: "caco3",
    name: "كربونات الكالسيوم CaCO₃ (مثل الحجر الجيري)",
    type: "معدني/ملح",
    oxRed: "غير مؤكسد/غير مختزل بشكل مباشر",
    strength: "ضعيف/محايد",
    products: "لا تفاعل مباشر مع الحديد في الظروف العادية؛ يستخدم في البيئات لتعديل الحموضة",
    equations: "—",
    desc: "CaCO₃ عادة لا يتفاعل مباشرة مع الحديد؛ دوره أكثر كعامل معاير/مادة داعمة في بيئات تآكل معينة.",
    image: "https://upload.wikimedia.org/wikipedia/commons/7/7d/Calcite-188829.jpg",
    video: "https://www.youtube.com/embed/7C0j9nXl2Tg",
    safety: "مألوف وآمن نسبياً."
  },

  {
    id: "pbno3",
    name: "نترات الرصاص Pb(NO₃)₂",
    type: "ملح أيوني / مؤكسد ضعيف",
    oxRed: "مؤكسد (نسبياً)",
    strength: "متوسطة",
    products: "قد يسبب تفاعلات إزاحة/تغيير في حالة الحديد في المحاليل",
    equations: "Fe + Pb²⁺ → Fe²⁺ + Pb (شروط معينة)",
    desc: "الأملاح الثقيلة يمكن أن تدخل في تفاعلات إزاحة أو تفاعل مع أيونات الحديد في المحاليل.",
    image: "https://upload.wikimedia.org/wikipedia/commons/d/d2/Lead_nitrate.jpg",
    video: "https://www.youtube.com/embed/5R6q6vA3l2A",
    safety: "مواد سامة وخطرة على البيئة؛ تجنب التعرّض."
  },

  {
    id: "kmno4",
    name: "برمنجانات البوتاسيوم KMnO₄",
    type: "مؤكسد قوي (ملح)",
    oxRed: "مؤكسد",
    strength: "قوي",
    products: "يؤكسد Fe²⁺ إلى Fe³⁺ ويولد منتجات Mn²⁺/MnO₂ حسب الوسط",
    equations: "5Fe²⁺ + MnO₄⁻ + 8H⁺ → 5Fe³⁺ + Mn²⁺ + 4H₂O",
    desc: "KMnO₄ مؤكسد قوي ويستخدم في تفاعلات الأكسدة المختبرية والصناعية؛ يتفاعل مع أيونات الحديد في المحاليل.",
    image: "https://upload.wikimedia.org/wikipedia/commons/7/73/Potassium_permanganate.png",
    video: "https://www.youtube.com/embed/Qr0Z0sQq-7Y",
    safety: "مؤكسد قوي يسبب تلطيخ وحروق مؤكسدة؛ تجنب التلامس."
  },

  {
    id: "na",
    name: "الصوديوم المعدني Na",
    type: "فلز قلوي",
    oxRed: "مختزل قوي (يتأكسد بسهولة)",
    strength: "قوي جدًا (كمختزل)",
    products: "يتأكسد ليعطي Na⁺، ويتفاعل مع الماء بطريقة عنيفة؛ مع الحديد سيؤدي إلى تفاعلات قوية وغير اعتيادية",
    equations: "2Na + 2H₂O → 2NaOH + H₂ (تفاعل عنيف)",
    desc: "الفلزات القلوية تتأكسد بسهولة ولا تتركها ظروف عادية للتفاعل السلمي مع الحديد. في العادة يُحفظ Na بعيدًا عن الماء والهواء.",
    image: "https://upload.wikimedia.org/wikipedia/commons/5/53/Sodium_sample.jpg",
    video: "https://www.youtube.com/embed/l3bY4ZtY9zQ",
    safety: "مواد شديدة التفاعل والانفجار؛ لا تتعامل بدون خبرة."
  },

  {
    id: "al",
    name: "الألومنيوم Al (معدن)",
    type: "فلز",
    oxRed: "قد يعمل كمختزل/حماية (طبقة أكسيد)",
    strength: "متوسط",
    products: "تآكل معقد: طبقة Al₂O₃ تحمي السطح؛ في تلامس كهربائي قد يسبب تفاعلات",
    equations: "Fe + Al (تفاعلات غالبة في الخلايا الجلفانية إذا تلامس المعادن المختلفة في وسط مائي)",
    desc: "الألمنيوم عادة يكون أكثر نشاطًا كعنصر كهربائياً من الحديد، ويمكن أن يسبب تآكلًا تحويليًا للحديد في الخلايا الجلفانية إذا التقى في وسط موصل.",
    image: "https://upload.wikimedia.org/wikipedia/commons/5/5f/Aluminium_sponge.jpg",
    video: "https://www.youtube.com/embed/DXh3aM4bT0c",
    safety: "عادي للتعامل الصناعي؛ الانتباه للغبار والأبخرة."
  },

  {
    id: "ca",
    name: "الكالسيوم Ca (معدن/أيونات)",
    type: "فلز قلوي أرضي",
    oxRed: "مختزل في شكل المعدن النقي",
    strength: "قوي نسبياً كمختزل",
    products: "تفاعلات اعتمادًا على الوسط؛ قد يؤكسد لإعطاء أملاح الكالسيوم",
    equations: "تفاعلات مع الماء تولد قاعديات وغاز H₂",
    desc: "الكالسيوم المعدني يتفاعل مع الماء وينتج قلويات؛ تأثيره على الحديد غالبًا غير مباشر عبر تعديل الوسط.",
    image: "https://upload.wikimedia.org/wikipedia/commons/3/32/Calcium_metal.jpg",
    video: "https://www.youtube.com/embed/t3T2iQh3yKk",
    safety: "التعامل بحذر مع المعادن النشطة."
  },

  {
    id: "sodium_chlorate",
    name: "كلورات الصوديوم / مؤكسدات قوية (ClO₃⁻)",
    type: "مؤكسدات",
    oxRed: "مؤكسد",
    strength: "قوية",
    products: "قد تسبب أكسدة الحديد وتآكله إلى +3 وأكسدة عضوية عنيفة",
    equations: "تفاعلات أكسدة عامة تعتمد على الوسط",
    desc: "المواد المؤكسدة مثل البرمنجنات أو الكلورات يمكن أن تسبب أكسدة حادة لأيونات الحديد وتغيير سلوك التآكل.",
    image: "https://upload.wikimedia.org/wikipedia/commons/5/5e/Sodium_chlorate.jpg",
    video: "https://www.youtube.com/embed/9d3j2rVq7d0",
    safety: "مؤكسدات قوية — خطر حريق وتفاعل عنيف."
  },

  {
    id: "organic_acids",
    name: "أحماض عضوية (مثل حمض الخليك CH₃COOH)",
    type: "أحماض ضعيفة",
    oxRed: "لا تعتبر مؤكسدات قوية",
    strength: "ضعيفة",
    products: "تآكل وتشكّل أملاح عضوية للحديد Fe(CH₃COO)₂/₃ مع مرور الوقت",
    equations: "Fe + 2CH₃COOH → Fe(CH₃COO)₂ + H₂ (نظريًا في ظروف محددة)",
    desc: "الأحماض الضعيفة تتسبب في تآكل بطيء للحديد وتكوين أملاح عضوية؛ الأثر يعتمد على التركيز ووجود مؤكسدات أخرى.",
    image: "https://upload.wikimedia.org/wikipedia/commons/3/32/Acetic-acid-3D-vdW.png",
    video: "https://www.youtube.com/embed/0k6Qv2X8KpY",
    safety: "أحماض ضعيفة لكنها قد تسبب تآكلًا في المعدات."
  },

  {
    id: "oxidizing_salts",
    name: "أملاح مؤكسدة أخرى (مثل ClO⁻, ClO₂ etc)",
    type: "مؤكسدات",
    oxRed: "مؤكسد",
    strength: "متفاوت (متوسطة إلى قوية)",
    products: "أكسدة Fe²⁺ إلى Fe³⁺ وتآكل السطح",
    equations: "تفاعلات متغيرة حسب النوع",
    desc: "المؤكسدات المتوسطة في الأنظمة المائية تسهل تحويل حالات أكسدة الحديد وتسرع التآكل السلبي أو النشط.",
    image: "https://upload.wikimedia.org/wikipedia/commons/8/88/Chlorinated_pool.jpg",
    video: "https://www.youtube.com/embed/1o0jz1qz7aA",
    safety: "تتطلب تعاملًا دقيقًا مع أدوات الحماية."
  }
];


/* ---------- Render grid of materials ---------- */
const grid = document.getElementById('materialsGrid');

function renderGrid(list) {
  grid.innerHTML = '';
  for (const m of list) {
    const col = document.createElement('div');
    col.className = 'col-sm-6 col-md-4 col-lg-3';
    col.innerHTML = `
      <div class="card card-material p-3 h-100" data-id="${m.id}" role="button">
        <img src="${m.image}" class="card-img-top rounded mb-2" style="height:140px;object-fit:cover">
        <div class="card-body p-2">
          <h5 class="card-title mb-1">${m.name}</h5>
          <p class="mb-1 small text-muted">${m.type}</p>
          <p class="mb-2"><span class="badge ${m.strength==='قوية' ? 'badge-strong' : 'badge-weak'}">${m.strength}</span>
          <span class="badge bg-secondary">${m.oxRed}</span></p>
          <p class="small text-truncate" title="${m.desc}">${m.desc}</p>
        </div>
        <div class="card-footer bg-transparent border-0 d-flex justify-content-between">
          <button class="btn btn-sm btn-outline-light" onclick="openDetail('${m.id}')"><i class="fa-solid fa-info"></i> تفاصيل</button>
          <button class="btn btn-sm btn-primary" onclick="openModalWithVideo('${m.id}')"><i class="fa-solid fa-play"></i> فيديو</button>
        </div>
      </div>
    `;
    grid.appendChild(col);
  }
}

/* ---------- Open modal ---------- */
const detailModal = new bootstrap.Modal(document.getElementById('detailModal'));

function findMaterial(id){ return materials.find(x => x.id === id); }

function openDetail(id){
  const m = findMaterial(id);
  if(!m) return;
  document.getElementById('modalTitle').innerText = m.name;
  document.getElementById('modalImage').src = m.image;
  document.getElementById('modalType').innerText = m.type;
  document.getElementById('modalOxRed').innerText = m.oxRed;
  document.getElementById('modalStrength').innerText = m.strength;
  document.getElementById('modalProducts').innerHTML = `<h6>النواتج (نماذج)</h6><p>${m.products}</p>`;
  document.getElementById('modalDesc').innerText = m.desc;
  document.getElementById('modalEquations').innerText = m.equations || 'لا معادلات نموذجية متاحة';
  document.getElementById('modalSafety').innerText = m.safety || '-';
  document.getElementById('modalVideo').src = m.video || '';
  detailModal.show();
}

function openModalWithVideo(id){
  openDetail(id);
}

/* ---------- Search functionality ---------- */
document.getElementById('globalSearch').addEventListener('input', function(){
  const q = this.value.trim().toLowerCase();
  if(!q) return renderGrid(materials);
  const filtered = materials.filter(m => {
    return (m.name + ' ' + m.type + ' ' + m.products + ' ' + m.desc).toLowerCase().includes(q);
  });
  renderGrid(filtered);
});

/* ---------- Toggle dark mode ---------- */
let dark=false;
function toggleMode(){
  dark = !dark;
  document.body.classList.toggle('dark-mode', dark);
  document.getElementById('toggleModeBtn').innerHTML = dark ? '<i class="fa-solid fa-sun"></i> وضع فاتح' : '<i class="fa-solid fa-moon"></i> وضع غامق';
}

/* ---------- Simulation ---------- */
function simulate(mode){
  const area = document.getElementById('simText');
  if(mode==='oxygen'){
    area.innerHTML = '🔥 تبدأ أكسدة السطح → تكوين Fe₃O₄ (مغنتيت) ...';
    setTimeout(()=> area.innerHTML = 'المغناطيسيت يتكوّن — Fe³⁺ و Fe²⁺ معًا', 1800);
  } else if(mode==='acid'){
    area.innerHTML = '⚗️ تهاجم الأحماض سطح الحديد → Fe²⁺ يذوب في المحلول + H₂ يتصاعد';
    setTimeout(()=> area.innerHTML = 'تحذير: غاز H₂ قابل للاشتعال', 1800);
  } else if(mode==='co'){
    area.innerHTML = '🔧 غازات مختزلة تقلل أكاسيد الحديد → إنتاج Fe فلزي (الحدادة)';
    setTimeout(()=> area.innerHTML = 'الحديد المنصهر يتكون في الأفران التقليدية', 1800);
  }
  setTimeout(()=> { document.getElementById('simText').innerHTML = 'اضغط زر لبدء المحاكاة'; }, 5000);
}

/* ---------- Export CSV ---------- */
document.getElementById('exportBtn').addEventListener('click', function(){
  let csv = 'name,type,oxRed,strength,products,equations,desc\n';
  materials.forEach(m => {
    // sanitize commas/newlines
    const row = [
      `"${m.name.replace(/"/g,'""')}"`,
      `"${m.type.replace(/"/g,'""')}"`,
      `"${m.oxRed.replace(/"/g,'""')}"`,
      `"${m.strength.replace(/"/g,'""')}"`,
      `"${m.products.replace(/"/g,'""')}"`,
      `"${(m.equations||'').replace(/"/g,'""')}"`,
      `"${(m.desc||'').replace(/"/g,'""')}"`];
    csv += row.join(',') + '\n';
  });
  const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'iron_materials_export.csv';
  a.click();
  URL.revokeObjectURL(url);
});

/* ---------- cleanup video on modal close ---------- */
document.getElementById('detailModal').addEventListener('hidden.bs.modal', function(){
  document.getElementById('modalVideo').src = '';
});

/* ---------- initial render ---------- */
renderGrid(materials);

  </script>
</body>
</html>
